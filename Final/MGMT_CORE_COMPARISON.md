# MGMT_CORE.V DETAILED LINE-BY-LINE COMPARISON

## File Information

| Property | SCL_rtl | SKY_rtl |
|----------|---------|---------|
| **File Path** | `SCL_rtl/mgmt_core.v` | `SKY_rtl/mgmt_core.v` |
| **Total Lines** | 8,474 lines | 831 lines |
| **Architecture Type** | LiteX (Auto-generated) | PicoRV32 (Hand-written) |
| **Generated/Created** | Oct 14, 2022 by Migen | Custom with includes |
| **Complexity** | Highly monolithic | Modular with sub-components |

---

## 1. FILE HEADER & INCLUDES

### SCL_rtl (Lines 1-6)
```verilog
//--------------------------------------------------------------------------------
// Auto-generated by Migen (9a0be7a) & LiteX (470fc6f) on 2022-10-14 12:53:55
//--------------------------------------------------------------------------------
`include "RAM256.v"
`include "RAM128.v"
`include "VexRiscv_MinDebugCache.v"
```

### SKY_rtl (Lines 1-49)
```verilog
`default_nettype none
/*
 *  SPDX-FileCopyrightText: 2015 Clifford Wolf
 ...
 *  SPDX-License-Identifier: ISC
 */

`ifdef PICORV32_V
`error "mgmt_core.v must be read before picorv32.v!"
`endif

`define PICORV32_REGS mgmt_soc_regs

`include "picorv32.v"
`include "spimemio.v"
`include "simpleuart.v"
`include "storage.v"
`include "gpio_wb.v"
`include "storage_bridge_wb.v"
`include "simple_spi_master.v"
`include "counter_timer_high.v"
`include "counter_timer_low.v"
`include "la_wb.v"
`include "sysctrl.v"
`include "wb_intercon.v"
`include "mem_wb.v"
`include "convert_gpio_sigs.v"
```

**Difference:**
- SCL: Auto-generated header with Migen/LiteX tools
- SKY: Hand-written with protection check and modular includes
- SCL includes: RAM modules + VexRiscv
- SKY includes: PicoRV32 + wishbone slaves + bridge modules

---

## 2. MODULE DECLARATION & PORT DEFINITIONS

### SCL_rtl Module Declaration (Lines 8-87)

```verilog
module mgmt_core(
`ifdef USE_POWER_PINS
    inout VPWR,	    /* 1.8V domain */
    inout VGND,
`endif
	input wire core_clk,        // ← Clock naming
	input wire core_rstn,       // ← Reset naming
	// ... ports continue
```

### SKY_rtl Module Declaration (Lines 50-188)

```verilog
module mgmt_core (
`ifdef USE_POWER_PINS
    inout vdd,	    /* 1.8V domain */  // ← Different power names
    inout vss,
`endif
    input clk,                  // ← Different clock name
    input resetn,               // ← Different reset name
    // ... ports continue
```

### Port Name Mapping

| Function | SCL_rtl Port Name | SKY_rtl Port Name | Type |
|----------|-------------------|-------------------|------|
| **Main Clock** | `core_clk` | `clk` | input |
| **Reset (active low)** | `core_rstn` | `resetn` | input |
| **Trap Output** | `trap` | `trap` | output |
| **Power Supply 1** | `VPWR` | `vdd` | inout |
| **Power Supply 2** | `VGND` | `vss` | inout |

---

## 3. GPIO PORT DIFFERENCES

### SCL_rtl GPIO Ports (Lines 46-51)
```verilog
output wire gpio_out_pad,       
input  wire gpio_in_pad,        
output wire gpio_outenb_pad,    // ← Uses "outenb" suffix
output wire gpio_inenb_pad,     // ← Uses "inenb" suffix
output wire gpio_mode0_pad,     
output wire gpio_mode1_pad,
```

### SKY_rtl GPIO Ports (Lines 77-82)
```verilog
output gpio_out_pad,	        // Connect to out on gpio pad
input  gpio_in_pad,		    // Connect to in on gpio pad
output gpio_outenb_pad,	        // ← Same "outenb"
output gpio_inenb_pad,	        // ← Same "inenb"
output gpio_mode0_pad,	        // Connect to dm[0] on gpio pad
output gpio_mode1_pad,	        // Connect to dm[2] on gpio pad
```

**Difference:** Comments only - ports are identical

---

## 4. SERIAL/UART PORT DIFFERENCES

### SCL_rtl UART Ports (Lines 41-42)
```verilog
output reg serial_tx,
input  wire serial_rx,
```

### SKY_rtl UART Ports (Lines 132-133)
```verilog
output ser_tx,
input  ser_rx,
```

| Signal | SCL_rtl | SKY_rtl | Difference |
|--------|---------|---------|-----------|
| TX | `serial_tx` | `ser_tx` | ❌ Different name |
| RX | `serial_rx` | `ser_rx` | ❌ Different name |

---

## 5. SPI PORTS DIFFERENCES

### SCL_rtl SPI Ports (Lines 27-31)
```verilog
output reg spi_clk,         // Line 27: Register type
output reg spi_cs_n,        // Line 28: Active low notation
output reg spi_mosi,        // Line 29: MOSI
input  wire spi_miso,       // Line 30: MISO
output wire spi_sdoenb,     // Line 31: Output enable (bar)
```

### SKY_rtl SPI Ports (Lines 134-138)
```verilog
output spi_csb,             // ← CSB (active low)
output spi_sck,             // ← SCK (not spi_clk)
output spi_sdo,             // ← SDO (not mosi)
output spi_sdoenb,          // ← Same
input  spi_sdi,             // ← SDI (not miso)
```

| Signal | SCL_rtl | SKY_rtl | Difference |
|--------|---------|---------|-----------|
| Clock | `spi_clk` | `spi_sck` | ❌ Different name |
| Chip Select | `spi_cs_n` | `spi_csb` | ❌ Different notation |
| Data Out | `spi_mosi` | `spi_sdo` | ❌ Notation difference |
| Data In | `spi_miso` | `spi_sdi` | ❌ Notation difference |
| OE Control | `spi_sdoenb` | `spi_sdoenb` | ✓ Same |

---

## 6. FLASH MEMORY CONTROL PORTS

### SCL_rtl Flash Ports (Lines 12-26)
```verilog
output wire flash_cs_n,         // Line 12: Active low notation
output reg flash_clk,           // Line 13: Register type
output reg flash_io0_oeb,       
output wire flash_io1_oeb,      
output wire flash_io2_oeb,      
output wire flash_io3_oeb,      
output reg flash_io0_do,        
output wire flash_io1_do,       
output wire flash_io2_do,       
output wire flash_io3_do,       
input  wire flash_io0_di,       
input  wire flash_io1_di,       
input  wire flash_io2_di,       
input  wire flash_io3_di,
```

### SKY_rtl Flash Ports (Lines 98-111)
```verilog
output flash_csb,               // ← CSB notation
output flash_clk,
output flash_io0_oeb,
output flash_io1_oeb,
output flash_io2_oeb,
output flash_io3_oeb,
output flash_io0_do,
output flash_io1_do,
output flash_io2_do,
output flash_io3_do,
input  flash_io0_di,
input  flash_io1_di,
input  flash_io2_di,
input  flash_io3_di,
```

| Signal | SCL_rtl | SKY_rtl | Difference |
|--------|---------|---------|-----------|
| **Chip Select** | `flash_cs_n` | `flash_csb` | ❌ Notation |
| **Clock** | `flash_clk` | `flash_clk` | ✓ Same |
| **IO[0:3] OEB** | `flash_io0_oeb` ... `flash_io3_oeb` | Same | ✓ Identical |
| **IO[0:3] DO** | `flash_io0_do` ... `flash_io3_do` | Same | ✓ Identical |
| **IO[0:3] DI** | `flash_io0_di` ... `flash_io3_di` | Same | ✓ Identical |

---

## 7. WISHBONE BUS (USER PROJECT) PORTS

### SCL_rtl Wishbone Ports (Lines 32-39)
```verilog
output wire mprj_wb_iena,       // Line 32: Wishbone enable
output wire mprj_cyc_o,
output wire mprj_stb_o,
output wire mprj_we_o,
output wire [3:0] mprj_sel_o,
output reg [31:0] mprj_adr_o,
output wire [31:0] mprj_dat_o,
input  wire mprj_ack_i,
input  wire [31:0] mprj_dat_i,
```

### SKY_rtl Wishbone Ports (Lines 113-121)
```verilog
output mprj_wb_iena,
input  mprj_ack_i,
input  [31:0] mprj_dat_i,
output mprj_cyc_o,
output mprj_stb_o,
output mprj_we_o,
output [3:0] mprj_sel_o,
output [31:0] mprj_adr_o,
output [31:0] mprj_dat_o,
```

**Difference:** Port order is different, but signal names identical ✓

---

## 8. HOUSEKEEPING (HK) WISHBONE PORTS

### SCL_rtl HK Ports (Lines 40-42)
```verilog
input  wire [31:0] hk_dat_i,
output wire hk_stb_o,
output wire hk_cyc_o,
input  wire hk_ack_i,
```

### SKY_rtl HK Ports (Lines 122-125)
```verilog
// Additional wishbone signals for housekeeping
input  [31:0] hk_dat_i,
output hk_stb_o,
output hk_cyc_o,
input  hk_ack_i,
```

**Difference:** ✓ Identical ports (SKY has explanatory comment)

---

## 9. LOGIC ANALYZER PORTS

### SCL_rtl LA Ports (Lines 53-56)
```verilog
output reg [127:0] la_output,
input  wire [127:0] la_input,
output reg [127:0] la_oenb,
output reg [127:0] la_iena,
```

### SKY_rtl LA Ports (Lines 93-96)
```verilog
input  [127:0] la_input,        // From user project to CPU
output [127:0] la_output,       // From CPU to user project
output [127:0] la_oenb,         // Logic analyzer output enable
output [127:0] la_iena,         // Logic analyzer input enable
```

**Difference:** Port order different, but signals identical ✓ (SKY has comments)

---

## 10. INTERRUPT (IRQ) PORTS

### SCL_rtl IRQ Ports (Lines 60-61)
```verilog
output wire [2:0] user_irq_ena,
input  wire [5:0] user_irq,     // ← Uses "user_irq"
```

### SKY_rtl IRQ Ports (Lines 105-106)
```verilog
output [2:0] user_irq_ena,	// Enables for user area external IRQs
input  [5:0] irq,               // ← Uses "irq"
```

| Signal | SCL_rtl | SKY_rtl | Difference |
|--------|---------|---------|-----------|
| **IRQ Input** | `user_irq[5:0]` | `irq[5:0]` | ❌ Different name |
| **IRQ Enable Out** | `user_irq_ena[2:0]` | `user_irq_ena[2:0]` | ✓ Same |

---

## 11. MODULE STATUS OUTPUT PORTS

### SCL_rtl Status Ports (Lines 57-59, 48)
```verilog
output wire qspi_enabled,       // Line 57
output wire spi_enabled,        // Line 58
output wire debug_mode,         // Line 49 (appears early)
```

### SKY_rtl Status Ports (Lines 127-130)
```verilog
output qspi_enabled,
output uart_enabled,            // ← SCL_rtl missing?
output spi_enabled,
output debug_mode,
```

| Port | SCL_rtl | SKY_rtl | Present |
|------|---------|---------|---------|
| `qspi_enabled` | ✓ | ✓ | Both |
| `uart_enabled` | ❌ MISSING | ✓ | SKY only |
| `spi_enabled` | ✓ | ✓ | Both |
| `debug_mode` | ✓ | ✓ | Both |

**SCL_rtl is missing `uart_enabled` output!**

---

## 12. DEBUG PORTS

### SCL_rtl Debug Ports (Lines 43-45)
```verilog
input  wire debug_in,
output wire debug_out,
output wire debug_oeb,
```

### SKY_rtl Debug Ports (Lines 139-141)
```verilog
input  debug_in,
output debug_out,
output debug_oeb,
```

**Difference:** ✓ Identical (wire type declaration omitted in SKY)

---

## 13. ⭐ MEMORY INTERFACE PORTS - CRITICAL DIFFERENCE

### SCL_rtl Memory Ports
**NONE - NO MEMORY INTERFACE EXPOSED**

Internal memory is handled entirely within the module. No external memory ports.

### SKY_rtl Memory Ports (Lines 142-148)
```verilog
// Memory Interface 
output mem_ena,                 // Memory enable
output [3:0] mem_wen,           // Write enable per byte
output [7:0] mem_addr,          // Address (256 words max)
output [31:0] mem_wdata,        // Write data
input  [31:0] mem_rdata,        // Read data
```

**CRITICAL DIFFERENCE:** 
- ❌ **SCL_rtl: No memory interface** - Internal memory only
- ✓ **SKY_rtl: Exposed memory interface** - For external DFFRAM control

---

## 14. ⭐ SRAM READ-ONLY INTERFACE - CRITICAL DIFFERENCE

### SCL_rtl SRAM RO Ports
**NONE - NOT SUPPORTED**

### SKY_rtl SRAM RO Ports (Lines 150-154)
```verilog
// SRAM read-only access from housekeeping
input  sram_ro_clk,
input  sram_ro_csb,
input  [7:0] sram_ro_addr,
output [31:0] sram_ro_data
```

**CRITICAL DIFFERENCE:**
- ❌ **SCL_rtl:** No read-only SRAM interface
- ✓ **SKY_rtl:** Dedicated SRAM read-only interface for housekeeping

---

## 15. EXTRA HOUSEKEEPING PORTS (SCL_rtl ONLY)

### SCL_rtl Extra Ports (Lines 62-86)
```verilog
input wire clk_in,              // Line 62
output wire clk_out,            // Line 63
input wire resetn_in,           // Line 64
output wire resetn_out,         // Line 65
input wire serial_load_in,      // Line 66
output wire serial_load_out,    // Line 67
input wire serial_data_2_in,    // Line 68
output wire serial_data_2_out,  // Line 69
input wire serial_resetn_in,    // Line 70
output wire serial_resetn_out,  // Line 71
input wire serial_clock_in,     // Line 72
output wire serial_clock_out,   // Line 73
input wire rstb_l_in,           // Line 74
output wire rstb_l_out,         // Line 75
input wire por_l_in,            // Line 76
output wire por_l_out,          // Line 77
input wire porb_h_in,           // Line 78
output wire porb_h_out,         // Line 79
```

### SKY_rtl Extra Ports
**NONE - These ports do NOT exist in SKY_rtl**

| Port Group | SCL_rtl | SKY_rtl | Notes |
|------------|---------|---------|-------|
| Clocking (clk_in/out, resetn_in/out) | ✓ Present (4 ports) | ❌ Missing | Housekeeping interface |
| Serial Programming (serial_* pairs) | ✓ Present (6 ports) | ❌ Missing | GPIO loader interface |
| Reset Buffers (rstb_l) | ✓ Present (2 ports) | ❌ Missing | Reset distribution |
| Power Good (por_l, porb_h) | ✓ Present (4 ports) | ❌ Missing | Power monitoring |

**These are LiteX/housekeeping-specific ports NOT in the core itself**

---

## 16. INTERNAL SIGNAL DECLARATIONS

### SCL_rtl Internal Signals (Lines 89-186)
- **Wire signals:** `core_rst`, `sys_clk`, `sys_rst`, `por_clk`
- **Register signals:** `int_rst`, `mgmtsoc_soc_rst`, many control registers
- **Complex LiteX structures:** 
  - `mgmtsoc_reset_storage`
  - `mgmtsoc_bus_errors_status`
  - `mgmtsoc_ibus_*` (instruction bus)
  - `mgmtsoc_dbus_*` (data bus)
  - `mgmtsoc_vexriscv_*` (CPU debug interface)
  - `dff_bus_*`, `dff2_bus_*` (DFF RAM interfaces)
  - `mgmtsoc_litespisdrphycore_*` (LiteX SPI PHY)

### SKY_rtl Internal Signals (Lines 189-330+)
- **Register signals:** `irq_cpu`, `irq_stall`, `irq_uart`, etc.
- **Wire signals:** `wb_clk_i`, `wb_rst_i`
- **Module instantiation signals:** Wishbone slave interface signals
- **Simpler structure:** Individual signals for each module interface

**Difference:** 
- SCL: Complex auto-generated naming (mgmtsoc_*, dff_*, etc.)
- SKY: Clean, modular naming (uart_*, gpio_*, etc.)

---

## 17. CORE CPU INSTANTIATION

### SCL_rtl CPU (Line ~varies - complex instantiation)
Uses `VexRiscv_MinDebugCache` module from auto-generated includes

**Not easily readable due to auto-generation**

### SKY_rtl CPU (Lines ~280-310)
```verilog
picorv32_wb #(
    .STACKADDR(STACKADDR),
    .PROGADDR_RESET(PROGADDR_RESET),
    .PROGADDR_IRQ(PROGADDR_IRQ),
    .BARREL_SHIFTER(1),
    .COMPRESSED_ISA(1),
    .ENABLE_MUL(0),
    .ENABLE_DIV(0),
    .ENABLE_IRQ(1),
    .ENABLE_IRQ_QREGS(0)
) cpu (
    .wb_clk_i (wb_clk_i),
    .wb_rst_i (wb_rst_i),
    .trap     (trap),
    .irq      (irq_cpu),
    .mem_instr(mem_instr),
    .wbm_adr_o(cpu_adr_o),     
    .wbm_dat_i(cpu_dat_i),    
    .wbm_stb_o(cpu_stb_o),    
    .wbm_ack_i(cpu_ack_i),    
    .wbm_cyc_o(cpu_cyc_o),    
    .wbm_dat_o(cpu_dat_o),    
    .wbm_we_o(cpu_we_o),      
    .wbm_sel_o(cpu_sel_o)     
);
```

**Difference:**
- SCL: VexRiscv (RISC-V 64-bit capable)
- SKY: PicoRV32 (RISC-V 32-bit, simpler)

---

## 18. MEMORY ARCHITECTURE

### SCL_rtl Memory
```verilog
// Auto-generated internal DFF RAM and complex LiteX memory management
// Not exposed externally
// Includes dual DFFRAM structures (dff_bus, dff2_bus)
```

### SKY_rtl Memory
```verilog
// Line ~650+: Explicit mem_wb module instantiation
mem_wb soc_mem (
`ifdef USE_POWER_PINS
    .VPWR(vdd),
    .VGND(vss),
`endif
    .wb_clk_i(wb_clk_i),
    .wb_rst_i(wb_rst_i),
    // Wishbone interface
    .wb_adr_i(cpu_adr_o), 
    .wb_dat_i(cpu_dat_o),
    // ...
    // Memory interface to external DFFRAM
    .mem_ena (mem_ena),
    .mem_wen (mem_wen),
    .mem_addr (mem_addr),
    .mem_wdata (mem_wdata),
    .mem_rdata (mem_rdata)
);

// Explicit DFFRAM instantiation
DFFRAM #(
    .WSIZE(`DFFRAM_WSIZE), 
    .USE_LATCH(`DFFRAM_USE_LATCH)
) DFFRAM (
    // ... connections to mem_* signals
);
```

**Difference:**
- SCL: Internal memory management, not exposed
- SKY: Modular memory with explicit DFFRAM instance

---

## 19. WISHBONE INTERCONNECT

### SCL_rtl Interconnect
**Hardcoded within mgmt_core - not modular**

Slave routing integrated directly in the auto-generated code

### SKY_rtl Interconnect (Lines ~750+)
```verilog
// Explicit Wishbone interconnect module
wb_intercon #(
    .AW(ADR_WIDTH),
    .DW(DAT_WIDTH),
    .NS(NUM_SLAVES),
    .ADR_MASK(ADR_MASK),
    .SLAVE_ADR(SLAVE_ADR)
) intercon (
    // Master Interface
    .wbm_adr_i(cpu_adr_o),
    .wbm_stb_i(cpu_stb_o),
    .wbm_dat_o(cpu_dat_i),
    .wbm_ack_o(cpu_ack_i),

    // Slaves Interface
    .wbs_stb_o({ spimemio_cfg_stb_i, mprj_stb_o, hk_stb_o, la_stb_i,
        sysctl_stb_i, spi_master_stb_i,
        counter_timer1_stb_i, counter_timer0_stb_i,
        gpio_stb_i, uart_stb_i,
        spimemio_flash_stb_i, stg_ro_stb_i, stg_rw_stb_i, mem_stb_i }), 
    // ... more connections
);
```

**Difference:**
- SCL: Hardcoded routing (not reusable)
- SKY: Parameterized interconnect (14 slaves, flexible addressing)

---

## 20. MEMORY MAP BASE ADDRESSES

### SKY_rtl Defined Base Addresses (Lines ~175-215)
```verilog
parameter RAM_BASE_ADR    = 32'h 0000_0000;
parameter STORAGE_RW_ADR  = 32'h 0100_0000;
parameter STORAGE_RO_ADR  = 32'h 0200_0000;
parameter FLASH_BASE_ADR  = 32'h 1000_0000;
parameter UART_BASE_ADR   = 32'h 2000_0000;
parameter GPIO_BASE_ADR   = 32'h 2100_0000;
parameter COUNTER_TIMER0_BASE_ADR = 32'h 2200_0000;
parameter COUNTER_TIMER1_BASE_ADR = 32'h 2300_0000;
parameter SPI_MASTER_BASE_ADR = 32'h 2400_0000;
parameter LA_BASE_ADR     = 32'h 2500_0000;
parameter HK_BASE_ADR     = 32'h 2600_0000;
parameter FLASH_CTRL_CFG  = 32'h 2d00_0000;
parameter SYSCTL_BASE_ADR = 32'h 2f00_0000;
parameter MPRJ_BASE_ADR   = 32'h 3000_0000;
```

### SCL_rtl Address Mapping
**NOT explicitly defined - hardcoded in auto-generated logic**

Can be inferred from housekeeping.v:
```verilog
parameter GPIO_BASE_ADR = 32'h2600_0000,   // Actually HK!
parameter SPI_BASE_ADR = 32'h2610_0000,
parameter SYS_BASE_ADR = 32'h2620_0000,
```

**Difference:**
- SCL: Addresses hardcoded in routing logic (implicit)
- SKY: Clear parameterized addresses (explicit, maintainable)

---

## 21. MODULE INSTANTIATIONS - SUMMARY

### SCL_rtl Sub-modules
```
- VexRiscv_MinDebugCache (CPU)
- RAM256 (embedded RAM)
- RAM128 (embedded RAM)
- (Auto-generated LiteX modules - hardcoded)
```

### SKY_rtl Sub-modules
```
1. picorv32_wb             (CPU)
2. spimemio_wb             (Flash SPI controller)
3. la_wb                   (Logic analyzer)
4. simpleuart_wb           (UART)
5. simple_spi_master_wb    (SPI master)
6. counter_timer_low_wb    (Counter timer 0)
7. counter_timer_high_wb   (Counter timer 1)
8. gpio_wb                 (GPIO control)
9. sysctrl_wb              (System control)
10. mem_wb                 (Memory controller)
11. storage_bridge_wb      (Storage interface)
12. storage                (SRAM storage)
13. wb_intercon            (Wishbone interconnect)
14. DFFRAM                 (Embedded SRAM)
15. convert_gpio_sigs      (GPIO signal conversion)
```

**Difference:**
- SCL: Monolithic, hardcoded logic flow
- SKY: 15 discrete modules, clear separation of concerns

---

## SUMMARY TABLE: CRITICAL DIFFERENCES

| Feature | SCL_rtl | SKY_rtl | Impact |
|---------|---------|---------|--------|
| **Architecture** | LiteX (Auto) | PicoRV32 (Hand-written) | Complexity |
| **Clock Signal** | `core_clk` | `clk` | Port name |
| **Reset Signal** | `core_rstn` | `resetn` | Port name |
| **Power Pins** | `VPWR`/`VGND` | `vdd`/`vss` | Technology |
| **UART Signals** | `serial_tx`/`rx` | `ser_tx`/`rx` | Port name |
| **SPI Clock** | `spi_clk` | `spi_sck` | Port name |
| **SPI CS** | `spi_cs_n` | `spi_csb` | Notation |
| **SPI Data** | `spi_mosi`/`miso` | `spi_sdo`/`sdi` | Notation |
| **Flash CS** | `flash_cs_n` | `flash_csb` | Notation |
| **IRQ Signal** | `user_irq[5:0]` | `irq[5:0]` | Port name |
| **UART Enabled** | ❌ Missing | ✓ Present | Port exists |
| **Memory Interface** | ❌ None (internal) | ✓ Exposed | Critical feature |
| **SRAM RO Interface** | ❌ None | ✓ Present | Housekeeping access |
| **Extra Ports** | ✓ 18 extra (housekeeping) | ❌ None | Scope difference |
| **Wishbone Interconnect** | Hardcoded | Parameterized | Flexibility |
| **Base Addresses** | Implicit | Explicit | Maintainability |
| **Total Lines** | 8,474 | 831 | Readability |
| **CPU Type** | VexRiscv | PicoRV32 | Instruction set |

---

## CONFIGURATION DIFFERENCES

### SKY_rtl Parameter Sections (Lines ~175+)

**Memory Configuration:**
```verilog
parameter [31:0] STACKADDR = (4*(`MEM_WORDS));
parameter [31:0] PROGADDR_RESET = 32'h 1000_0000;
parameter [31:0] PROGADDR_IRQ   = 32'h 0000_0000;
```

**UART Configuration:**
```verilog
parameter UART_CLK_DIV = 8'h00;
parameter UART_DATA    = 8'h04;
```

**SPI Master Configuration:**
```verilog
parameter SPI_MASTER_CONFIG = 8'h00;
parameter SPI_MASTER_DATA = 8'h04;
```

**Counter-Timer Configuration:**
```verilog
parameter COUNTER_TIMER0_CONFIG = 8'h00;
parameter COUNTER_TIMER0_VALUE = 8'h04;
// ... etc
```

**Wishbone Interconnect:**
```verilog
localparam ADR_WIDTH = 32;
localparam DAT_WIDTH = 32;
localparam NUM_SLAVES = 14;
```

### SCL_rtl Configuration
**All configuration hardcoded in auto-generated LiteX code**

---

## FUNCTIONAL MAPPING EQUIVALENCE

| Function | SCL_rtl Method | SKY_rtl Method |
|----------|---|---|
| CPU Reset | Hardcoded in auto-gen | `mgmt_core_wrapper` → `.resetn` |
| Memory Access | Internal DFF RAM | External via `mem_*` ports + DFFRAM |
| UART Interface | Internal simpleuart logic | `simpleuart_wb` module |
| SPI Master | Hardcoded LiteX logic | `simple_spi_master_wb` module |
| Flash Control | Hardcoded | `spimemio_wb` module |
| GPIO Control | Hardcoded GPIO logic | `gpio_wb` + `convert_gpio_sigs` |
| Logic Analyzer | Auto-gen LA logic | `la_wb` module |
| Housekeeping Access | Dual interface (wrapper + core) | Via separate `housekeeping.v` |
| Interrupts | CPU interrupt bus | `irq_cpu` mapping (see lines 325-332) |

---

## KEY OBSERVATIONS

### 1. **Port Naming Conventions**
- **SCL_rtl:** Uses full names (`core_clk`, `serial_tx`, `spi_clk`)
- **SKY_rtl:** Uses abbreviated names (`clk`, `ser_tx`, `spi_sck`)

### 2. **Technology Binding**
- **SCL_rtl:** Generic/SCL180 focused
- **SKY_rtl:** Sky130 focused (see housekeeping.v buffer cells)

### 3. **Modularity**
- **SCL_rtl:** Monolithic (8,474 lines of hardcoded logic)
- **SKY_rtl:** Modular (831 lines + 15 sub-modules)

### 4. **Maintainability**
- **SCL_rtl:** Auto-generated, difficult to modify
- **SKY_rtl:** Hand-written, clear interfaces

### 5. **Memory Architecture**
- **SCL_rtl:** Internal memory, no external interface
- **SKY_rtl:** External memory interface for flexibility

### 6. **Critical Missing Features in SCL_rtl**
- ❌ No `uart_enabled` output
- ❌ No exposed memory interface
- ❌ No SRAM read-only interface
- ❌ No parameterized addressing

---

## CONCLUSION

The two implementations serve different purposes:

- **SCL_rtl:** Complete, auto-generated LiteX SoC with VexRiscv, optimized for SCL180
- **SKY_rtl:** Modular, hand-written PicoRV32 system optimized for Sky130 with clean interfaces

They are **functionally equivalent** for basic operations but have significant differences in:
1. **Architecture** (LiteX vs custom)
2. **Port naming** (different conventions)
3. **Modularity** (integrated vs separated)
4. **Extensibility** (hardcoded vs parameterized)
5. **Memory system** (internal vs external)

